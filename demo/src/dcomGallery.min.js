"use strict";angular.module("dcomGallery",[]).directive("dcomGalleryPic",["$window",function(a){var b=function(a){var b=a.position().top,c=window.innerHeight,d=window.scrollY;return b>d&&c+d>b};return{restrict:"A",replace:!0,scope:!0,template:'<div class="galleryPic"><img ng-src="{{resolvedPic}}" ng-class="{loaded: resolvedPic}" class="{{orientation}}" /><div class="loader"></div></div>',link:function(c,d){c.resolvedPic=null,c.orientation=null;var e=!1,f=function(){b(d)&&!e&&g()},g=function(){e=!0;var a=new Image,b="images/thumb/"+c.pic+".jpg";a.onload=function(){c.$apply(function(){c.orientation=a.width>a.height?"landscapeImg":"portraitImg",c.resolvedPic=b})},a.src=b};f(),angular.element(a).bind("scroll",f),angular.element(a).bind("resize",f),d.bind("click",function(a){a&&a.preventDefault(),c.changeImg(c.pic)})}}}]).directive("dcomFullSizePic",["$rootScope",function(a){return{restrict:"A",replace:!0,template:'<img ng-src="images/gallery/{{fullSizeImg}}.jpg" class="maximizedImg"ng-class="{hiddenPic: hidePic}" />',link:function(b,c){b.$watch(function(){return $(window).height()},function(a){c.parent().css("height",a+"px")}),a.$watch("fullSizeImg",function(c){var d=new Image,e="images/gallery/"+c+".jpg";d.onload=function(){b.$apply(function(){a.hidePic=!1})},d.src=e}),c.bind("contextmenu rightclick",function(a){a.preventDefault()})}}}]);